(this["webpackJsonpreact-mobx-demo"]=this["webpackJsonpreact-mobx-demo"]||[]).push([[0],{18:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),c=n(11),o=n.n(c),s=(n(18),n(7)),a=n(4),u=n(5),l=n.n(u),h=n(8),d=n(6),f=n(9),j=n(2),b=n(10),g=n.n(b),O=[{id:1,title:"iPhone 8",category:"Phone",condition:"new"},{id:2,title:"Samsung Galaxy",category:"Phone",condition:"new"},{id:3,title:"OnePlus 8",category:"Phone",condition:"used"},{id:4,title:"Dell XPS",category:"Laptop",condition:"new"},{id:5,title:"Macbook Pro",category:"Laptop",condition:"new"},{id:6,title:"Asus Zenbook",category:"Laptop",condition:"used"},{id:7,title:"Nikon D750",category:"Camera",condition:"new"},{id:8,title:"Canon M50",category:"Camera",condition:"new"},{id:9,title:"Leica M6",category:"Camera",condition:"used"}],p=[{id:1,title:"Phone"},{id:2,title:"Laptop"},{id:3,title:"Camera"}],x=function(t,e){return g()(e).includes(g()(t))},v=function(t){return new Promise((function(e){return setTimeout(e,t)}))},y=function(){var t=Object(h.a)(l.a.mark((function t(e,n){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e?n.filter((function(t){return g()(t.title).includes(g()(e))})):n,t.next=3,v(500);case 3:return t.abrupt("return",Promise.resolve({data:i,total:i.length}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(t){return y(t,O)},F=function(t){return y(t,p)},m=new(function(){function t(){var e=this;Object(d.a)(this,t),this.products=[],this.query="",this.category="",this.sortAsc=!0,this.fetched=!1,this.fetching=!1,this.onFetch=Object(h.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetching=!0,t.prev=1,t.next=4,C();case 4:n=t.sent,e.onFetchSuccess(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Failed to fetch",t.t0);case 11:return t.prev=11,e.fetching=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),this.onFetchSuccess=function(t){e.products.replace(t),e.fetched=!0},this.onChangeCategory=function(t){e.category=t},this.onChangeQuery=function(t){e.query=t},this.onChangeSort=function(t){e.sortAsc=t},this.onClearFilters=function(){e.category="",e.query="",e.sortAsc=!0},Object(j.e)(this),Object(j.i)((function(){return!e.category&&!e.query}),(function(){return console.log("All filters cleared")}))}return Object(f.a)(t,[{key:"results",get:function(){var t=this;return this.products.slice().filter((function(e){return!t.category||e.category===t.category})).filter((function(e){return!t.query||x(t.query,e.title)})).sort((function(e,n){return t.sortAsc?e.title.localeCompare(n.title):n.title.localeCompare(e.title)}))}},{key:"canClearFilters",get:function(){return this.query||this.category||!this.sortAsc}}]),t}()),S=n(0),k=["","Phone","Laptop","Camera"],q=Object(a.a)((function(){var t=m.fetched,e=m.query,n=m.category,i=m.sortAsc,r=m.canClearFilters,c=m.onChangeCategory,o=m.onChangeQuery,s=m.onChangeSort,a=m.onClearFilters;return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{children:["Filter:",Object(S.jsx)("select",{value:n||"",onChange:function(t){return c(t.target.value)},children:k.map((function(t){return Object(S.jsx)("option",{value:t,children:t||"All"},t)}))})]}),Object(S.jsxs)("div",{children:["Search:",Object(S.jsx)("input",{type:"text",value:e,onChange:function(t){return o(t.target.value)}})]}),Object(S.jsxs)("div",{children:["Sort ascending:",Object(S.jsx)("input",{type:"checkbox",checked:i,onChange:function(t){return s(t.target.checked)}})]}),r&&Object(S.jsx)("button",{onClick:a,children:"Clear filters"})]}):null})),w=Object(a.a)((function(){var t=m.fetching,e=m.results,n=m.onFetch;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:n,children:t?"Fetching":"Fetch"})}),Object(S.jsx)(q,{}),Object(S.jsx)("ul",{children:e.map((function(t){return Object(S.jsx)("li",{children:t.title},t.id)}))})]})})),A=n(3),P=n.n(A),D=function(){function t(e){var n=this;Object(d.a)(this,t),this.data=[],this.filtersState={},this.filtersDefinition={},this.query="",this.sortAsc=!0,this.fetched=!1,this.fetching=!1,this.props={},this.onFetch=Object(h.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.fetching=!0,t.prev=1,t.next=4,n.props.fetch();case 4:e=t.sent,n._onFetchSuccess(e.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n._onFetchFailure(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),this._onFetchSuccess=function(t){n.data.replace(t),n.fetched=!0,n.fetching=!1},this._onFetchFailure=function(t){console.log("Failed to fetch",t),n.fetching=!1},this.onSetFilterState=function(t,e){n.filtersState[t]=e},this.onSetFilterDefinition=function(t,e){n.filtersDefinition[t]=e},this.onChangeQuery=function(t){n.query=t},this.onChangeSort=function(t){n.sortAsc=t},this.onClearFilters=function(){n.filtersState={},n.sortAsc=!0,n.query=""},Object(j.e)(this),this.props=e,e.filters&&Object.entries(e.filters).forEach((function(t){var e=Object(s.a)(t,2),i=e[0],r=e[1];return n.onSetFilterDefinition(i,r)}))}return Object(f.a)(t,[{key:"results",get:function(){var t=this;return this.data.slice().sort((function(e,n){return t.sortAsc?e.title.localeCompare(n.title):n.title.localeCompare(e.title)})).filter((function(e){return!t.query||x(t.query,e.title)})).filter((function(e){return Object.entries(t.filtersState).every((function(t){var n=Object(s.a)(t,2),i=n[0],r=n[1];return Object.entries(e).every((function(t){var e=Object(s.a)(t,2),n=e[0],c=e[1];return i!==n||!r||r===c}))}))}))}},{key:"hasFilters",get:function(){return Object.keys(this.filtersState).length&&Object.values(this.filtersState).every((function(t){return t}))}},{key:"canClearFilters",get:function(){return Boolean(this.query||!this.sortAsc||this.hasFilters)}}]),t}(),L=(P.a.shape({data:P.a.arrayOf(P.a.object).isRequired,query:P.a.string.isRequired,sortAsc:P.a.bool.isRequired,fetched:P.a.bool.isRequired,fetching:P.a.bool.isRequired,props:P.a.shape({fetch:P.a.func.isRequired,filters:P.a.objectOf(P.a.array)}).isRequired}),Object(a.a)((function(t){var e=t.collection,n=e.canClearFilters,i=e.fetched,r=e.filtersState,c=e.filtersDefinition,o=e.onChangeQuery,a=e.onChangeSort,u=e.onClearFilters,l=e.onSetFilterState,h=e.query,d=e.sortAsc;return i?Object(S.jsxs)(S.Fragment,{children:[c&&Object(S.jsx)("div",{children:Object.entries(c).map((function(t){var e=Object(s.a)(t,2),n=e[0],i=e[1];return Object(S.jsxs)("div",{children:[n,":",Object(S.jsxs)("select",{value:r[n]||"",onChange:function(t){return l(n,t.target.value)},children:[Object(S.jsx)("option",{value:"",children:"All"}),i.map((function(t){return Object(S.jsx)("option",{value:t.title,children:t.title},t.id)}))]})]},n)}))}),Object(S.jsxs)("div",{children:["Search:",Object(S.jsx)("input",{type:"text",value:h,onChange:function(t){return o(t.target.value)}})]}),Object(S.jsxs)("div",{children:["Sort ascending:",Object(S.jsx)("input",{type:"checkbox",checked:d,onChange:function(t){return a(t.target.checked)}})]}),n&&Object(S.jsx)("button",{onClick:u,children:"Clear filters"})]}):null}))),R=Object(a.a)((function(t){var e=t.collection,n=e.fetching,i=e.results,r=e.onFetch;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:r,children:n?"Fetching":"Fetch"})}),Object(S.jsx)(L,{collection:e}),Object(S.jsx)("ul",{children:i.map((function(t){return Object(S.jsx)("li",{children:t.title},t.id)}))})]})})),B=new function t(){var e=this;Object(d.a)(this,t),this.categories=new D({fetch:F}),this.products=new D({fetch:C,filters:{category:[],condition:[{id:"new",title:"new"},{id:"used",title:"used"}]}}),Object(j.b)((function(){return e.products.onSetFilterDefinition("category",e.categories.data)}))},M=Object(i.createContext)(B),N=Object(a.a)((function(){var t=Object(i.useContext)(M);return Object(S.jsxs)("div",{style:{display:"flex"},children:[Object(S.jsxs)("div",{style:{marginRight:48},children:["Categories",Object(S.jsx)(R,{collection:t.categories})]}),Object(S.jsxs)("div",{children:["Products",Object(S.jsx)(R,{collection:t.products})]})]})})),Q=new(function(){function t(){var e=this;Object(d.a)(this,t),this.count=0,this.onAdd=function(){e.count+=1},this.onSubtract=function(){e.count-=1},Object(j.e)(this)}return Object(f.a)(t,[{key:"isNegative",get:function(){return this.count<0?"Yes":"No"}}]),t}()),_=[Object(a.a)((function(){var t=Q.count,e=Q.isNegative,n=Q.onAdd,i=Q.onSubtract;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{children:["Count: ",t]}),Object(S.jsxs)("div",{children:["Is negative: ",e]}),Object(S.jsx)("button",{onClick:n,children:"Add"}),Object(S.jsx)("button",{onClick:i,children:"Subtract"})]})})),w,N];var I=function(){var t=Object(i.useState)(0),e=Object(s.a)(t,2),n=e[0],r=e[1],c=_[n];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h2",{children:"Demos"}),Object(S.jsxs)("div",{style:{marginBottom:24},children:[Object(S.jsx)("button",{onClick:function(){return r(0)},children:"Simple"}),Object(S.jsx)("button",{onClick:function(){return r(1)},children:"Advanced"}),Object(S.jsx)("button",{onClick:function(){return r(2)},children:"Complex"})]}),Object(S.jsx)(c,{})]})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),i(t),r(t),c(t),o(t)}))};o.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(I,{})}),document.getElementById("root")),T()}},[[23,1,2]]]);
//# sourceMappingURL=main.26320176.chunk.js.map